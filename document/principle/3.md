# 依赖倒置原则——面向对象设计原则	[返回首页](../../README.md)


## 来源
>依赖倒置原则（Dependence Inversion Principle，DIP）是 Object Mentor 公司总裁罗伯特·马丁（Robert C.Martin）于 1996 年在 C++ Report 上发表的文章。

## 含义
>依赖倒置原则的原始定义为：**高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象**（High level modules shouldnot depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details. Details should depend upon abstractions）。可以看[《面向接口编程》](https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B/6025286?fr=aladdin), 其核心思想是：**要面向接口编程，不要面向实现编程**。<br>

## 作用
>依赖倒置原则的主要作用如下。
1. 依赖倒置原则可以降低类间的耦合性。
2. 依赖倒置原则可以提高系统的稳定性。
3. 依赖倒置原则可以减少并行开发引起的风险。
4. 依赖倒置原则可以提高代码的可读性和可维护性。

## 优点
>依赖倒置原则是实现开闭原则的重要途径之一，它降低了客户与实现模块之间的耦合。

>由于在软件设计中，细节具有多变性，而抽象层则相对稳定，因此以抽象为基础搭建起来的架构要比以细节为基础搭建起来的架构要稳定得多。这里的抽象指的是接口或者抽象类，而细节是指具体的实现类。

>使用接口或者抽象类的目的是制定好规范和契约，而不去涉及任何具体的操作，把展现细节的任务交给它们的实现类去完成。


## 问题由来
>	类A直接依赖类B，假如要将类A改为依赖类C，则必须通过修改类A的代码来达成。这种场景下，类A一般是高层模块，负责复杂的业务逻辑；类B和类C是低层模块，负责基本的原子操作；假如修改类A，会给程序带来不必要的风险。

## 解决方案
>	将类A修改为依赖接口I，类B和类C各自实现接口I，类A通过接口I间接与类B或者类C发生联系，则会大大降低修改类A的几率。

## 实现方式
>	依赖倒置原则的目的是通过要面向接口的编程来降低类间的耦合性，所以我们在实际编程中只要遵循以下4点，就能在项目中满足这个规则。
1. 每个类尽量提供接口或抽象类，或者两者都具备。
2. 变量的声明类型尽量是接口或者是抽象类。
3. 任何类都不应该从具体类派生。
4. 使用继承时尽量遵循里氏替换原则。

## 案例说明	[引用网文]
>【例3】
	开心讲故事, 只要给开心一本书, 开心校长就可以开始讲故事了, [代码 V1.0](../../design-mode/dip/src/main/java/com/lkh/dip/version1/README.md)
	
>	虽然以上用代码实现了 这样的一个场景, 开心讲故事, 可是跟上面所说的, **问题由来**一样
>>开心先生为 类A, 书为类B , 开心先生依赖类B, 所以此时如果让开心去读一份新闻(新闻为类C)时, 发现学富五车的开心先生办不到, 因为如果开心想办到,就只能去修改类A来达到需求, 如果以后增加需求读其它的东西(类D, 类E...), 每次增加需求就要去修改类A, 会给程序带来不必要的风险, 所以**按解决方案**, 我们来修改一下  [代码 V2.0](../../design-mode/dip/src/main/java/com/lkh/dip/version2/README.md)


[返回](../../README.md)